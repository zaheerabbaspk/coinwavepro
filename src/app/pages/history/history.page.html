<ion-content [fullscreen]="true" class="ion-padding">
  <div class="max-w-4xl mx-auto my-20 space-y-6">

    <!-- Segments -->
    <div class="flex gap-2">
      <button (click)="setSegment('all')" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors"
        [class.bg-emerald-500]="currentSegment === 'all'" [class.text-white]="currentSegment === 'all'"
        [class.bg-gray-800]="currentSegment !== 'all'" [class.text-gray-400]="currentSegment !== 'all'">
        All
      </button>
      <button (click)="setSegment('earnings')" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors"
        [class.bg-emerald-500]="currentSegment === 'earnings'" [class.text-white]="currentSegment === 'earnings'"
        [class.bg-gray-800]="currentSegment !== 'earnings'" [class.text-gray-400]="currentSegment !== 'earnings'">
        Earnings
      </button>
      <button (click)="setSegment('expenses')" class="px-4 py-2 rounded-xl text-sm font-medium transition-colors"
        [class.bg-emerald-500]="currentSegment === 'expenses'" [class.text-white]="currentSegment === 'expenses'"
        [class.bg-gray-800]="currentSegment !== 'expenses'" [class.text-gray-400]="currentSegment !== 'expenses'">
        Expenses
      </button>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-2 gap-4">
      <div class="bg-gray-800 border border-emerald-900/50 rounded-2xl p-4">
        <p class="text-gray-400 text-xs mb-1">Total Earned</p>
        <p class="text-emerald-400 font-bold text-xl">+${{ totalEarned.toFixed(2) }}</p>
      </div>
      <div class="bg-gray-800 border border-red-900/50 rounded-2xl p-4">
        <p class="text-gray-400 text-xs mb-1">Total Spent</p>
        <p class="text-red-400 font-bold text-xl">-${{ totalSpent.toFixed(2) }}</p>
      </div>
    </div>

    <!-- Transaction List -->
    <div class="bg-gray-800 border border-gray-700 rounded-2xl overflow-hidden">
      <div *ngFor="let tx of filteredTransactions; let last = last"
        class="p-4 flex items-center gap-4 hover:bg-gray-700/50 transition-colors" [class.border-b]="!last"
        [class.border-gray-700]="!last">

        <!-- Icon based on category -->
        <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0" [ngClass]="{
               'bg-emerald-500/20 text-emerald-400': tx.type === 'earning',
               'bg-red-500/20 text-red-400': tx.category === 'withdrawal',
               'bg-emerald-500/10 text-emerald-500': tx.category === 'purchase',
               'bg-amber-500/20 text-amber-400': tx.category === 'pending'
             }">

          <!-- Reward/Bonus -->
          <svg *ngIf="tx.category === 'reward' || tx.category === 'referral'" xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7" />
          </svg>

          <!-- Task -->
          <svg *ngIf="tx.category === 'task'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>

          <!-- Purchase -->
          <svg *ngIf="tx.category === 'purchase'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
          </svg>

          <!-- Withdrawal -->
          <svg *ngIf="tx.category === 'withdrawal'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
          </svg>

          <!-- Pending -->
          <svg *ngIf="tx.category === 'pending'" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>

        <!-- Details -->
        <div class="flex-1 min-w-0">
          <h3 class="text-white font-medium truncate">{{ tx.title }}</h3>
          <p class="text-gray-400 text-xs truncate">{{ tx.subtitle }}</p>
        </div>

        <!-- Amount & Date -->
        <div class="text-right flex-shrink-0">
          <p class="font-bold text-sm" [class.text-emerald-400]="tx.type === 'earning'"
            [class.text-red-400]="tx.category === 'withdrawal' || tx.category === 'purchase'"
            [class.text-amber-400]="tx.category === 'pending'">
            {{ tx.category === 'pending' ? '' : (tx.type === 'earning' ? '+' : 'â†— -') }}${{ tx.amount.toFixed(2) }}
          </p>
          <p class="text-gray-500 text-xs">
            {{ tx.date }}<span *ngIf="tx.time">, {{ tx.time }}</span>
          </p>
        </div>

      </div>

      <!-- Empty State -->
      <div *ngIf="filteredTransactions.length === 0" class="text-center py-8 text-gray-500">
        <p>No transactions found.</p>
      </div>
    </div>

  </div>
</ion-content>