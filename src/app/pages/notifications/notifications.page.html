<div class="min-h-screen bg-gray-900 text-white pb-20 pt-24 px-4">

  @if (!selectedNotification) {
  <div class="space-y-4 max-w-3xl mx-auto">

    <!-- Filter Buttons -->
    <div class="flex space-x-2 mb-6">
      <button (click)="setFilter('all')" class="px-4 py-2 rounded-full text-sm font-medium transition-colors"
        [class.bg-blue-600]="filterType === 'all'" [class.text-white]="filterType === 'all'"
        [class.bg-gray-800]="filterType !== 'all'" [class.text-gray-400]="filterType !== 'all'"
        [class.hover:bg-gray-700]="filterType !== 'all'">
        All
      </button>
      <button (click)="setFilter('read')" class="px-4 py-2 rounded-full text-sm font-medium transition-colors"
        [class.bg-blue-600]="filterType === 'read'" [class.text-white]="filterType === 'read'"
        [class.bg-gray-800]="filterType !== 'read'" [class.text-gray-400]="filterType !== 'read'"
        [class.hover:bg-gray-700]="filterType !== 'read'">
        Read
      </button>
      <button (click)="setFilter('unread')" class="px-4 py-2 rounded-full text-sm font-medium transition-colors"
        [class.bg-blue-600]="filterType === 'unread'" [class.text-white]="filterType === 'unread'"
        [class.bg-gray-800]="filterType !== 'unread'" [class.text-gray-400]="filterType !== 'unread'"
        [class.hover:bg-gray-700]="filterType !== 'unread'">
        Unread
      </button>
    </div>

    @for (note of filteredNotifications; track note.id) {
    <div (click)="selectNotification(note)"
      class="bg-gray-800 rounded-xl p-4 flex items-start space-x-4 cursor-pointer hover:bg-gray-700 transition-colors border border-gray-700">

      <!-- Icon based on read status -->
      <div class="flex-shrink-0 mt-1">
        @if (!note.read) {
        <div class="w-10 h-10 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
        </div>
        } @else {
        <div class="w-10 h-10 rounded-full bg-gray-700 text-gray-400 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 19v-8.93a2 2 0 01.89-1.664l7.102-4.736a2 2 0 012.216 0l7.102 4.736a2 2 0 01.89 1.664V19a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9 6 9-6" />
          </svg>
        </div>
        }
      </div>

      <div class="flex-1 min-w-0">
        <div class="flex justify-between items-start mb-1">
          <h3 class="text-base font-semibold text-white truncate pr-2" [class.text-blue-400]="!note.read">{{ note.title
            }}</h3>
          <span class="text-xs text-gray-500 whitespace-nowrap">{{ formatDate(note.date) }}</span>
        </div>
        <p class="text-sm text-gray-400 line-clamp-2">{{ note.excerpt }}</p>
      </div>

      @if (!note.read) {
      <div class="w-2 h-2 bg-blue-500 rounded-full self-center"></div>
      }
    </div>
    }
  </div>
  } @else {
  <!-- Detailed View -->
  <div class="max-w-3xl mx-auto bg-gray-800 rounded-xl border border-gray-700 overflow-hidden">

    <div class="p-4 border-b border-gray-700 flex items-center bg-gray-800 sticky top-0">
      <button (click)="clearSelection()"
        class="p-2 -ml-2 rounded-full hover:bg-gray-700 text-gray-400 hover:text-white transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <span class="ml-2 font-medium text-gray-300">Back to Notifications</span>
    </div>

    <div class="p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-white">{{ selectedNotification.title }}</h2>
      </div>

      <div class="flex items-center space-x-4 mb-6 text-sm text-gray-400">
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          {{ formatDate(selectedNotification.date) }}
        </div>
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          {{ formatTime(selectedNotification.date) }}
        </div>
      </div>

      <div class="prose prose-invert max-w-none text-gray-300 leading-relaxed">
        {{ selectedNotification.content }}
      </div>
    </div>
  </div>
  }
</div>